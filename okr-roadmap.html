<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KairOS Interactive OKR Roadmap</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/js-yaml@4.1.0/dist/js-yaml.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            text-align: center;
            color: #2d3748;
            margin-bottom: 10px;
            font-size: 2.5rem;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .subtitle {
            text-align: center;
            color: #4a5568;
            margin-bottom: 40px;
            font-size: 1.1rem;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #4a5568;
            font-size: 1.2rem;
        }

        .error {
            background: #fed7d7;
            color: #c53030;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #f56565;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            text-align: center;
            transition: transform 0.2s;
        }

        .stat-card:hover {
            transform: translateY(-2px);
        }
        
        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
        }
        
        .stat-label {
            color: #4a5568;
            font-size: 0.9rem;
        }

        .controls {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            align-items: center;
        }
        
        .control-group {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        select, button {
            padding: 10px 15px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 14px;
            background: white;
            transition: all 0.2s;
        }
        
        button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            cursor: pointer;
            font-weight: 500;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .view-tabs {
            display: flex;
            gap: 5px;
            margin-bottom: 20px;
            background: #f7fafc;
            padding: 5px;
            border-radius: 10px;
        }

        .view-tab {
            padding: 10px 20px;
            background: transparent;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 500;
        }

        .view-tab.active {
            background: white;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            color: #2d3748;
        }

        .chart-container {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
            overflow-x: auto;
        }

        .mermaid {
            text-align: center;
        }

        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            z-index: 1000;
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }

        .toast.show {
            transform: translateX(0);
        }

        .toast.success {
            background: #48bb78;
        }

        .toast.error {
            background: #f56565;
        }

        .toast.info {
            background: #4299e1;
        }

        .edit-panel {
            background: #f7fafc;
            border-radius: 12px;
            padding: 20px;
            margin-top: 30px;
            border: 2px dashed #cbd5e0;
        }

        .edit-form {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 15px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .form-group label {
            font-weight: 500;
            color: #2d3748;
        }

        .form-group input, .form-group textarea, .form-group select {
            padding: 10px;
            border: 2px solid #e2e8f0;
            border-radius: 6px;
            font-size: 14px;
        }

        .export-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .task-preview {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            display: none;
        }

        .task-preview.show {
            display: block;
        }

        .task-preview h4 {
            margin: 0 0 10px 0;
            color: #2d3748;
        }

        .task-preview p {
            margin: 5px 0;
            color: #4a5568;
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            .controls {
                flex-direction: column;
                align-items: stretch;
            }
            
            .control-group {
                justify-content: space-between;
            }
            
            .stats-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéØ KairOS Interactive OKR Roadmap</h1>
        <p class="subtitle">Live objectives and key results tracking with dynamic data integration</p>
        
        <div id="loading" class="loading">
            üìä Loading OKR data from okrs.yml...
        </div>

        <div id="error" class="error" style="display: none;"></div>
        
        <div id="main-content" style="display: none;">
            <!-- Stats Overview -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="overall-progress">0%</div>
                    <div class="stat-label">Overall Progress</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="active-objectives">0</div>
                    <div class="stat-label">Active Objectives</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="total-krs">0</div>
                    <div class="stat-label">Key Results</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="completed-krs">0</div>
                    <div class="stat-label">Completed</div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls">
                <div class="control-group">
                    <label>Quarter:</label>
                    <select id="quarter-select">
                        <option value="all">All Quarters</option>
                        <option value="Q1">Q1 2025</option>
                        <option value="Q2">Q2 2025</option>
                        <option value="Q3">Q3 2025</option>
                        <option value="Q4">Q4 2025</option>
                    </select>
                </div>
                <button onclick="refreshData()">üîÑ Refresh Data</button>
                <button onclick="exportToYAML()">üíæ Export YAML</button>
                <button onclick="exportToCSV()">üìä Export CSV</button>
                <button onclick="generateReport()">üìã Generate Report</button>
            </div>

            <!-- View Tabs -->
            <div class="view-tabs">
                <button class="view-tab active" onclick="switchView('gantt')">üìä Gantt Chart</button>
                <button class="view-tab" onclick="switchView('timeline')">üìÖ Timeline</button>
            </div>

            <!-- Dynamic Content Area -->
            <div id="chart-container" class="chart-container"></div>

            <!-- Edit Panel -->
            <div class="edit-panel">
                <h3>‚úèÔ∏è Add New Key Result</h3>
                <p>Add a new key result to any objective. Changes will be exported to YAML file.</p>
                
                <div class="edit-form">
                    <div class="form-group">
                        <label>Objective:</label>
                        <select id="objective-select" required>
                            <option value="">Select Objective</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Key Result ID:</label>
                        <input type="text" id="kr-id" placeholder="e.g., Q1f" required>
                    </div>
                    <div class="form-group">
                        <label>Title:</label>
                        <input type="text" id="kr-title" placeholder="Enter key result title" required>
                    </div>
                    <div class="form-group">
                        <label>End Date:</label>
                        <input type="date" id="kr-end" required>
                    </div>
                    <div class="form-group">
                        <label>Progress (%):</label>
                        <input type="number" id="kr-progress" min="0" max="100" value="0">
                    </div>
                    <div class="form-group">
                        <label>Notes:</label>
                        <textarea id="kr-notes" rows="3" placeholder="Optional notes..."></textarea>
                    </div>
                </div>
                
                <div class="task-preview" id="task-preview">
                    <h4>Preview:</h4>
                    <p id="preview-text"></p>
                </div>
                
                <div class="export-buttons">
                    <button onclick="addKeyResult()">‚ûï Add Key Result</button>
                    <button onclick="previewTask()">üëÅÔ∏è Preview</button>
                    <button onclick="validateForm()">‚úÖ Validate</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global state
        let okrData = null;
        let currentView = 'gantt';
        let modifiedData = null;

        // Initialize Mermaid
        mermaid.initialize({
            startOnLoad: false,
            theme: 'default',
            gantt: {
                titleTopMargin: 25,
                barHeight: 20,
                gridLineStartPadding: 350,
                fontSize: 11,
                fontFamily: '"Source Sans Pro", sans-serif',
                sectionFontSize: 14,
                numberSectionStyles: 4
            }
        });

        // Utility functions
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => toast.classList.add('show'), 100);
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => document.body.removeChild(toast), 300);
            }, 3000);
        }

        function showError(message) {
            const errorDiv = document.getElementById('error');
            errorDiv.textContent = message;
            errorDiv.style.display = 'block';
            document.getElementById('loading').style.display = 'none';
        }

        function hideError() {
            document.getElementById('error').style.display = 'none';
        }

        function calculateProgress(objective) {
            if (!objective.krs || objective.krs.length === 0) {
                // If no KRs, estimate based on time elapsed
                const now = new Date();
                const endDate = new Date(objective.end);
                const startDate = new Date('2025-01-01');
                
                if (now > endDate) return 100;
                
                const totalDuration = endDate - startDate;
                const elapsed = now - startDate;
                return Math.max(0, Math.min(100, Math.round((elapsed / totalDuration) * 100)));
            }
            
            const now = new Date();
            let totalProgress = 0;
            
            objective.krs.forEach(kr => {
                const endDate = new Date(kr.end);
                
                if (now > endDate) {
                    totalProgress += 100; // Assume completed if past due
                } else if (kr.progress !== undefined) {
                    totalProgress += kr.progress;
                } else {
                    // Estimate based on time
                    const startDate = new Date('2025-01-01');
                    const totalDuration = endDate - startDate;
                    const elapsed = now - startDate;
                    totalProgress += Math.max(0, Math.min(100, (elapsed / totalDuration) * 100));
                }
            });
            
            return Math.round(totalProgress / objective.krs.length);
        }

        function updateStats() {
            if (!okrData || !okrData.objectives) return;

            const objectives = okrData.objectives;
            const totalKrs = objectives.reduce((sum, obj) => sum + (obj.krs ? obj.krs.length : 0), 0);
            const now = new Date();
            
            let totalProgress = 0;
            let completedKrs = 0;
            
            objectives.forEach(obj => {
                totalProgress += calculateProgress(obj);
                
                if (obj.krs) {
                    obj.krs.forEach(kr => {
                        const endDate = new Date(kr.end);
                        if (now > endDate || (kr.progress !== undefined && kr.progress >= 100)) {
                            completedKrs++;
                        }
                    });
                }
            });
            
            const overallProgress = Math.round(totalProgress / objectives.length);
            
            document.getElementById('overall-progress').textContent = overallProgress + '%';
            document.getElementById('active-objectives').textContent = objectives.length;
            document.getElementById('total-krs').textContent = totalKrs;
            document.getElementById('completed-krs').textContent = completedKrs;
        }

        function populateObjectiveSelect() {
            const select = document.getElementById('objective-select');
            select.innerHTML = '<option value="">Select Objective</option>';
            
            if (okrData && okrData.objectives) {
                okrData.objectives.forEach(obj => {
                    const option = document.createElement('option');
                    option.value = obj.id;
                    option.textContent = `${obj.id}: ${obj.title}`;
                    select.appendChild(option);
                });
            }
        }

        function generateGanttChart(objectives) {
            const quarterFilter = document.getElementById('quarter-select').value;
            const filteredObjectives = quarterFilter === 'all' ? objectives : 
                objectives.filter(obj => obj.id === quarterFilter);
            
            if (filteredObjectives.length === 0) {
                return '<p>No objectives found for selected quarter.</p>';
            }
            
            let ganttDefinition = `gantt
    title KairOS OKR Roadmap - ${quarterFilter === 'all' ? 'All Quarters' : quarterFilter + ' 2025'}
    dateFormat YYYY-MM-DD
    axisFormat %b %d
    
`;
            
            filteredObjectives.forEach(obj => {
                ganttDefinition += `    section ${obj.title}\n`;
                
                if (obj.krs && obj.krs.length > 0) {
                    obj.krs.forEach(kr => {
                        const progress = kr.progress || 0;
                        const now = new Date();
                        const endDate = new Date(kr.end);
                        const status = now > endDate ? 'done' : progress >= 100 ? 'done' : 
                                     progress > 0 ? 'active' : 'crit';
                        
                        const title = kr.title.length > 45 ? kr.title.substring(0, 45) + '...' : kr.title;
                        ganttDefinition += `    ${title} :${status}, ${kr.id}, 2025-01-01, ${kr.end}\n`;
                    });
                } else {
                    ganttDefinition += `    ${obj.title} :active, ${obj.id}, 2025-01-01, ${obj.end}\n`;
                }
            });
            
            return ganttDefinition;
        }

        function generateTimelineChart(objectives) {
            const quarterFilter = document.getElementById('quarter-select').value;
            const filteredObjectives = quarterFilter === 'all' ? objectives : 
                objectives.filter(obj => obj.id === quarterFilter);
            
            let timelineDefinition = `timeline
    title KairOS OKR Timeline - ${quarterFilter === 'all' ? 'All Quarters' : quarterFilter + ' 2025'}
    
`;
            
            filteredObjectives.forEach(obj => {
                timelineDefinition += `    ${obj.id} : ${obj.title}\n`;
                if (obj.krs && obj.krs.length > 0) {
                    obj.krs.forEach(kr => {
                        const progress = kr.progress || 0;
                        const status = progress >= 100 ? '‚úÖ' : progress > 0 ? 'üîÑ' : '‚è≥';
                        const title = kr.title.length > 35 ? kr.title.substring(0, 35) + '...' : kr.title;
                        timelineDefinition += `        : ${status} ${title}\n`;
                    });
                }
            });
            
            return timelineDefinition;
        }

        function renderChart() {
            if (!okrData || !okrData.objectives) return;
            
            const container = document.getElementById('chart-container');
            let chartDefinition = '';
            
            switch (currentView) {
                case 'gantt':
                    chartDefinition = generateGanttChart(okrData.objectives);
                    break;
                case 'timeline':
                    chartDefinition = generateTimelineChart(okrData.objectives);
                    break;
            }
            
            if (chartDefinition.startsWith('<p>')) {
                container.innerHTML = chartDefinition;
            } else {
                container.innerHTML = `<div class="mermaid" id="main-chart">${chartDefinition}</div>`;
                mermaid.init(undefined, document.getElementById('main-chart'));
            }
        }

        function switchView(view) {
            currentView = view;
            
            // Update tab states
            document.querySelectorAll('.view-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
            
            renderChart();
            showToast(`Switched to ${view} view`, 'success');
        }

        function refreshData() {
            showToast('Refreshing data...', 'info');
            loadOKRData();
        }

        // Load OKR data from YAML
        async function loadOKRData() {
            try {
                hideError();
                document.getElementById('loading').style.display = 'block';
                document.getElementById('main-content').style.display = 'none';
                
                const response = await fetch('./okrs.yml');
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const yamlText = await response.text();
                okrData = jsyaml.load(yamlText);
                modifiedData = JSON.parse(JSON.stringify(okrData)); // Deep copy
                
                if (!okrData || !okrData.objectives) {
                    throw new Error('Invalid OKR data structure');
                }
                
                // Update UI
                updateStats();
                populateObjectiveSelect();
                renderChart();
                
                document.getElementById('loading').style.display = 'none';
                document.getElementById('main-content').style.display = 'block';
                
                showToast('OKR data loaded successfully!', 'success');
                
            } catch (error) {
                console.error('Error loading OKR data:', error);
                showError(`Failed to load OKR data: ${error.message}. Make sure okrs.yml is accessible.`);
            }
        }

        // Form validation and preview
        function validateForm() {
            const objectiveId = document.getElementById('objective-select').value;
            const krId = document.getElementById('kr-id').value;
            const krTitle = document.getElementById('kr-title').value;
            const krEnd = document.getElementById('kr-end').value;
            
            const errors = [];
            
            if (!objectiveId) errors.push('Please select an objective');
            if (!krId) errors.push('Please enter a key result ID');
            if (!krTitle) errors.push('Please enter a title');
            if (!krEnd) errors.push('Please select an end date');
            
            // Check for duplicate ID
            if (modifiedData && objectiveId) {
                const objective = modifiedData.objectives.find(obj => obj.id === objectiveId);
                if (objective && objective.krs) {
                    const existingKr = objective.krs.find(kr => kr.id === krId);
                    if (existingKr) {
                        errors.push('Key result ID already exists in this objective');
                    }
                }
            }
            
            if (errors.length > 0) {
                showToast('Validation errors: ' + errors.join(', '), 'error');
                return false;
            }
            
            showToast('Form validation passed!', 'success');
            return true;
        }

        function previewTask() {
            if (!validateForm()) return;
            
            const objectiveId = document.getElementById('objective-select').value;
            const krId = document.getElementById('kr-id').value;
            const krTitle = document.getElementById('kr-title').value;
            const krEnd = document.getElementById('kr-end').value;
            const krProgress = document.getElementById('kr-progress').value;
            const krNotes = document.getElementById('kr-notes').value;
            
            const objective = okrData.objectives.find(obj => obj.id === objectiveId);
            const previewText = `
                <strong>Objective:</strong> ${objective.title}<br>
                <strong>Key Result:</strong> ${krId} - ${krTitle}<br>
                <strong>End Date:</strong> ${krEnd}<br>
                <strong>Progress:</strong> ${krProgress}%<br>
                ${krNotes ? `<strong>Notes:</strong> ${krNotes}` : ''}
            `;
            
            document.getElementById('preview-text').innerHTML = previewText;
            document.getElementById('task-preview').classList.add('show');
        }

        function addKeyResult() {
            if (!validateForm()) return;
            
            const objectiveId = document.getElementById('objective-select').value;
            const krId = document.getElementById('kr-id').value;
            const krTitle = document.getElementById('kr-title').value;
            const krEnd = document.getElementById('kr-end').value;
            const krProgress = parseInt(document.getElementById('kr-progress').value) || 0;
            const krNotes = document.getElementById('kr-notes').value;
            
            // Find the objective in modified data
            const objective = modifiedData.objectives.find(obj => obj.id === objectiveId);
            if (!objective) {
                showToast('Objective not found', 'error');
                return;
            }
            
            if (!objective.krs) {
                objective.krs = [];
            }
            
            const newKr = {
                id: krId,
                title: krTitle,
                end: krEnd
            };
            
            if (krProgress > 0) {
                newKr.progress = krProgress;
            }
            
            if (krNotes) {
                newKr.notes = krNotes;
            }
            
            objective.krs.push(newKr);
            
            // Clear form
            document.getElementById('objective-select').value = '';
            document.getElementById('kr-id').value = '';
            document.getElementById('kr-title').value = '';
            document.getElementById('kr-end').value = '';
            document.getElementById('kr-progress').value = '0';
            document.getElementById('kr-notes').value = '';
            document.getElementById('task-preview').classList.remove('show');
            
            // Update display
            okrData = JSON.parse(JSON.stringify(modifiedData)); // Update working copy
            updateStats();
            renderChart();
            
            showToast('Key result added successfully! Use Export YAML to save changes.', 'success');
        }

        // Export functions
        function exportToYAML() {
            if (!modifiedData) {
                showToast('No data to export', 'error');
                return;
            }
            
            const yamlString = jsyaml.dump(modifiedData, {
                indent: 2,
                lineWidth: 80,
                noRefs: true
            });
            
            const blob = new Blob([yamlString], { type: 'text/yaml' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'okrs-modified.yml';
            a.click();
            URL.revokeObjectURL(url);
            
            showToast('YAML exported successfully! Replace your okrs.yml file with this download.', 'success');
        }

        function exportToCSV() {
            if (!okrData || !okrData.objectives) {
                showToast('No data to export', 'error');
                return;
            }
            
            let csv = 'Objective ID,Objective Title,KR ID,KR Title,End Date,Progress,Notes\n';
            
            okrData.objectives.forEach(obj => {
                if (obj.krs && obj.krs.length > 0) {
                    obj.krs.forEach(kr => {
                        const notes = kr.notes || '';
                        csv += `"${obj.id}","${obj.title}","${kr.id}","${kr.title}","${kr.end}","${kr.progress || 0}%","${notes}"\n`;
                    });
                } else {
                    csv += `"${obj.id}","${obj.title}","","","${obj.end}","0%",""\n`;
                }
            });
            
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'kairos-okr-export.csv';
            a.click();
            URL.revokeObjectURL(url);
            
            showToast('CSV exported successfully!', 'success');
        }

        function generateReport() {
            if (!okrData || !okrData.objectives) {
                showToast('No data to generate report', 'error');
                return;
            }
            
            const now = new Date();
            let report = `# KairOS OKR Progress Report
Generated: ${now.toLocaleDateString()}

## North Star
${okrData.north_star || 'No north star defined'}

## Overall Progress
- **Total Objectives:** ${okrData.objectives.length}
- **Overall Progress:** ${document.getElementById('overall-progress').textContent}
- **Key Results:** ${document.getElementById('total-krs').textContent}
- **Completed:** ${document.getElementById('completed-krs').textContent}

## Detailed Progress

`;
            
            okrData.objectives.forEach(obj => {
                const progress = calculateProgress(obj);
                report += `### ${obj.title} (${obj.id})
- **Progress:** ${progress}%
- **End Date:** ${obj.end}
- **Owner:** ${obj.owner || 'Not assigned'}

`;
                
                if (obj.krs && obj.krs.length > 0) {
                    report += `**Key Results:**\n`;
                    obj.krs.forEach(kr => {
                        const krProgress = kr.progress || 0;
                        const status = krProgress >= 100 ? '‚úÖ' : krProgress > 0 ? 'üîÑ' : '‚è≥';
                        report += `- ${status} ${kr.title} (${krProgress}%) - Due: ${kr.end}\n`;
                    });
                }
                
                report += '\n';
            });
            
            report += `## Recommendations
- Review objectives with low progress
- Consider resource reallocation for at-risk items
- Celebrate completed milestones
- Update timelines if needed

---
*Generated by KairOS Interactive OKR Roadmap*
`;
            
            const blob = new Blob([report], { type: 'text/markdown' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'kairos-okr-report.md';
            a.click();
            URL.revokeObjectURL(url);
            
            showToast('Report generated successfully!', 'success');
        }

        // Event listeners
        document.getElementById('quarter-select').addEventListener('change', function() {
            renderChart();
        });

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            loadOKRData();
        });
    </script>
</body>
</html>
